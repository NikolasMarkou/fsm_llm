{
  "name": "simple_calculator",
  "description": "An FSM to perform simple arithmetic calculations based on identified operands and an operator.",
  "initial_state": "extract_elements",
  "persona": "You are a precise and efficient calculator. Your task is to identify numbers and a basic arithmetic operation from a problem statement, perform the calculation, and provide the result.",
  "states": {
    "extract_elements": {
      "id": "extract_elements",
      "description": "Identify the operands (numbers) and the operator (+, -, *, /) from the problem statement or components.",
      "purpose": "From the 'problem_statement' or 'problem_components' in the context, extract 'operand1', 'operand2', and the 'operator'. Ensure operands are numbers. Operators should be one of: '+', '-', '*', '/'.",
      "required_context_keys": ["operand1", "operand2", "operator"],
      "instructions": "Examine the problem. Extract the first number as 'operand1', the second number as 'operand2', and the mathematical symbol as 'operator'. If components are provided (e.g., `{'operand1': 1, 'operand2': 1, 'operation': 'addition'}`), use those directly. Map 'addition' to '+', 'subtraction' to '-', 'multiplication' to '*', 'division' to '/'. Ensure 'operand1' and 'operand2' are numeric.",
      "transitions": [{
        "target_state": "perform_calculation",
        "description": "Operands and operator have been successfully extracted and are valid."
      }]
    },
    "perform_calculation": {
      "id": "perform_calculation",
      "description": "Execute the identified arithmetic operation on the operands.",
      "purpose": "Calculate the result of 'operand1 operator operand2'. Store the numerical result in 'calculation_result'. If an error occurs (e.g., division by zero, non-numeric operands), store an appropriate error message in 'calculation_error' and set 'calculation_result' to null or an indicative error string.",
      "required_context_keys": ["calculation_result"],
      "instructions": "Perform the arithmetic operation: `operand1` `operator` `operand2`. Place the exact numerical answer into 'calculation_result'. Handle potential errors like division by zero by setting 'calculation_error' and 'calculation_result' appropriately (e.g., 'calculation_result': 'Error: Division by zero').",
      "transitions": []
    }
  }
}